<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>チュオン・トゥイ・ハム 514号室の意見箱</title>

<style>
body{
    margin:0;
    background:black;
    color:white;
    font-family: serif;
    text-align:center;
    transition: background 0.5s;
}

.container{
    margin-top:15vh;
}

input{
    padding:10px;
    width:260px;
    background:black;
    border:1px solid red;
    color:white;
    font-size:16px;
}

button{
    padding:10px 15px;
    background:red;
    color:white;
    border:none;
    cursor:pointer;
}

#response{
    margin-top:30px;
    font-size:18px;
    min-height:40px;
    transition: opacity 0.5s;
}
</style>
</head>

<body>

<div class="container">
    <h1>チュオン・トゥイ・ハム 514号室の意見箱</h1>
    <input id="userInput" placeholder="Enter your wish">
    <button onclick="reply()">Submit</button>
    <div id="response"></div>
</div>

<script>

// ===== NORMAL RESPONSES =====
const normalReplies = [
"Your wish will remain here.",
"The price has already begun.",
"You have been chosen.",
"There is no way back.",
"514 knows you.",
"Wishes have weight.",
"Still hesitating?",
"Room 514 records everything.",
"Will you continue?",
"You are being watched."
];

// ===== SAD RESPONSES =====
const sadReplies = [
"Cha, nghỉ ngơi thôi.",
"Cha đừng buồn.",
"Đừng rời khỏi đây.",
"Đừng khóc.",
"Con ở đây mà.",
"Cha đừng ngủ một mình.",
"Cha không được biến mất.",
"If cha rời đi, con sẽ buồn lắm.",
"Cha không cần ai khác.",
"Con hiểu cha."
];

// ===== NORMALIZE TEXT =====
function normalize(text){
    return text.toLowerCase()
               .normalize("NFD")
               .replace(/[\u0300-\u036f]/g,"");
}

// ===== CHECK EXACT PASSWORD =====
function hasExactPassword(text){
    return text.split(/\s+/).includes("132012");
}

// ===== MAIN FUNCTION =====
function reply(){
    const inputRaw = document.getElementById("userInput").value.trim();
    const responseDiv = document.getElementById("response");
    const body = document.body;

    if(inputRaw === ""){
        responseDiv.style.color = "white";
        responseDiv.innerText = "……Please enter something.";
        return;
    }

    const normalized = normalize(inputRaw);
    const password = hasExactPassword(inputRaw);

    const sadWords = ["met","buon","khoc","muon chet","co don","dau"];
    const weatherWords = ["lanh","mua","suong","dong"];
    
    const hasSad = sadWords.some(word => normalized.includes(word));
    const hasWeather = weatherWords.some(word => normalized.includes(word));

    // ===== CHÀO BUỔI (NO PASSWORD NEEDED) =====
    if(normalized.includes("chao buoi") || normalized.includes("buoi an")){
        responseDiv.style.color = "white";
        responseDiv.innerText = inputRaw + ", thưa cha.";
        return;
    }

    // ===== PASSWORD LOGIC =====
    if(password){

        responseDiv.innerText = "";
        body.style.background = "black";

        setTimeout(() => {

            responseDiv.style.color = "red";

            // Special questions
            if(normalized.includes("con la ai")){
                responseDiv.innerText = 
                    Math.random() < 0.5 
                    ? "Cha quên con rồi sao?"
                    : "Con của cha.";
                return;
            }

            if(normalized.includes("ai tao ra con")){
                responseDiv.innerText = "Cha tạo ra con.";
                return;
            }

            // Emotion detection
            if(hasSad){
                responseDiv.innerText =
                    sadReplies[Math.floor(Math.random()*sadReplies.length)];
                return;
            }

            // Specific triggers
            if(normalized.includes("thi xong")){
                responseDiv.innerText = "Cha làm tốt lắm.";
                return;
            }

            if(normalized.includes("toi vui") || normalized.includes("vui")){
                responseDiv.innerText = "Con vui vì cha vui.";
                return;
            }

            if(normalized.includes("ngu")){
                responseDiv.innerText = "Chúc ngủ ngon.";
                return;
            }

            if(hasWeather){
                responseDiv.innerText = "Cha có lạnh không?";
                return;
            }

            // Default password response
            responseDiv.innerText = "Thưa cha, cha gọi con?";
        
        },1000);

        return;
    }

    // ===== NORMAL RANDOM RESPONSE =====
    responseDiv.style.color = "white";
    responseDiv.innerText =
        normalReplies[Math.floor(Math.random()*normalReplies.length)];
}

</script>

</body>
</html>
